// Система локализации (ru, chv, tt)

export type Lang = 'ru' | 'chv' | 'tt';

export const LANGUAGES: { id: Lang; name: string; nativeName: string }[] = [
  { id: 'ru', name: 'Russian', nativeName: 'Русский' },
  { id: 'chv', name: 'Chuvash', nativeName: 'Чăвашла' },
  { id: 'tt', name: 'Tatar', nativeName: 'Татарча' },
];

export const translations = {
  // Общие
  appName: {
    ru: 'Анти-туристическая карта Казани',
    chv: 'Казанăн антитуризм картти',
    tt: 'Казанның антитуристик картасы',
  },
  subtitle: {
    ru: 'Зона исследования',
    chv: 'Тĕпчев районĕ',
    tt: 'Тикшеренү зонасы',
  },
  tagline: {
    ru: 'Исследуй город за пределами туристических маршрутов',
    chv: 'Хулана туристсен çулĕнчен тухса тĕпчĕр',
    tt: 'Шәһәрне туристик юллардан читтә өйрән',
  },

  // Навигация
  nav: {
    home: { ru: 'Главная', chv: 'Тĕп страница', tt: 'Башлам' },
    map: { ru: 'Карта', chv: 'Карта', tt: 'Карта' },
    howItWorks: { ru: 'Как это работает', chv: 'Мĕнле ĕçлет', tt: 'Ничек эшли' },
    ethics: { ru: 'Этика', chv: 'Этика', tt: 'Этика' },
    about: { ru: 'О проекте', chv: 'Проект çинчен', tt: 'Проект турында' },
  },

  // Режимы
  modes: {
    visitor: { ru: 'Гость', chv: 'Хăна', tt: 'Кунак' },
    explorer: { ru: 'Исследователь', chv: 'Тĕпчевçĕ', tt: 'Тикшеренүче' },
  },

  // Кнопки и действия
  actions: {
    addFinding: { ru: 'Добавить находку', chv: 'Тупăш хуш', tt: 'Табылган өстә' },
    imHere: { ru: 'Я здесь', chv: 'Эпĕ кунта', tt: 'Мин монда' },
    confirm: { ru: 'Подтвердить', chv: 'Çирĕплет', tt: 'Раслау' },
    cancel: { ru: 'Отмена', chv: 'Пăрахăçла', tt: 'Кире кагу' },
    share: { ru: 'Поделиться', chv: 'Уçăмла', tt: 'Уртаклашу' },
    copyLink: { ru: 'Скопировать ссылку', chv: 'Сăлтавне куç', tt: 'Сылтаманы күчермәлә' },
    embedCode: { ru: 'Код для вставки', chv: 'Хуша код', tt: 'Кушу өчен код' },
    selectOnMap: { ru: 'Выбрать на карте', chv: 'Картара суйла', tt: 'Картадан сайла' },
    save: { ru: 'Сохранить', chv: 'Упра', tt: 'Сакла' },
  },

  // Типы находок
  findingTypes: {
    Place: { ru: 'Место', chv: 'Вырăн', tt: 'Урын' },
    Food: { ru: 'Еда', chv: 'Апат', tt: 'Ашамлык' },
    Drink: { ru: 'Напиток', chv: 'Эçмелли', tt: 'Эчемлек' },
  },

  // Время активности
  timeActivity: {
    day: { ru: 'День', chv: 'Кун', tt: 'Көн' },
    evening: { ru: 'Вечер', chv: 'Каç', tt: 'Кич' },
    night: { ru: 'Ночь', chv: 'Çĕр', tt: 'Төн' },
  },

  // Карта
  map: {
    touristCore: { ru: 'Туристическое ядро', chv: 'Турист тĕшĕ', tt: 'Туристик үзәк' },
    explorationZone: { ru: 'Зона исследования', chv: 'Тĕпчев районĕ', tt: 'Тикшеренү зонасы' },
    fog: { ru: 'Неисследованная территория', chv: 'Тĕпченмен территори', tt: 'Өйрәнелмәгән территория' },
    findings: { ru: 'Находки', chv: 'Тупăшсем', tt: 'Табылганнар' },
    myLocation: { ru: 'Моё местоположение', chv: 'Ман вырăнăм', tt: 'Минем урыным' },
  },

  // Фильтры
  filters: {
    all: { ru: 'Все', chv: 'Пурĕ', tt: 'Барысы' },
    places: { ru: 'Места', chv: 'Вырăнсем', tt: 'Урыннар' },
    whereEats: { ru: 'Где ест город', chv: 'Хула мĕнте апатланать', tt: 'Шәһәр кайда ашый' },
    categories: { ru: 'Категории', chv: 'Категорисем', tt: 'Категорияләр' },
  },

  // Миссии
  missions: {
    title: { ru: 'Миссии', chv: 'Миссисем', tt: 'Миссияләр' },
    completed: { ru: 'Выполнено', chv: 'Пурнăçланнă', tt: 'Эшләнде' },
    progress: { ru: 'Прогресс', chv: 'Прогресс', tt: 'Прогресс' },

    escapeBubble: {
      title: { ru: 'Выйти из туристического пузыря', chv: 'Турист пузырĕнчен тух', tt: 'Туристик пузырьдан чык' },
      description: {
        ru: 'Добавить 1 находку вне туристического ядра',
        chv: 'Турист тĕшĕнчен тухса 1 тупăш хуш',
        tt: 'Туристик үзәктән читтә 1 табылган өстә',
      },
    },
    whereEats: {
      title: { ru: 'Где ест город', chv: 'Хула мĕнте апатланать', tt: 'Шәһәр кайда ашый' },
      description: {
        ru: 'Добавить 1 Food или Drink находку',
        chv: '1 апат е эçмелли тупăш хуш',
        tt: '1 ашамлык яки эчемлек өстә',
      },
    },
    afterWork: {
      title: { ru: 'После смены', chv: 'Ĕç хыççăн', tt: 'Эштән соң' },
      description: {
        ru: 'Добавить AfterWork место вечером',
        chv: 'Каçпа AfterWork вырăн хуш',
        tt: 'Кичтә AfterWork урыны өстә',
      },
    },
    quietKazan: {
      title: { ru: 'Тихая Казань', chv: 'Шăп Казан', tt: 'Тыныч Казан' },
      description: {
        ru: 'Добавить Calm место',
        chv: 'Шăп вырăн хуш',
        tt: 'Тыныч урын өстә',
      },
    },
    borderland: {
      title: { ru: 'Пограничье', chv: 'Чикеллĕ', tt: 'Чик буе' },
      description: {
        ru: 'Добавить Border находку',
        chv: 'Чикеллĕ тупăш хуш',
        tt: 'Чик буе табылганы өстә',
      },
    },
    threeSteps: {
      title: { ru: 'Три шага в неизвестность', chv: 'Виçĕ утăм паллă мар', tt: 'Билгесезлеккә өч адым' },
      description: {
        ru: 'Раскрыть 3 зоны тумана',
        chv: '3 тăман районĕ уç',
        tt: '3 томан зонасын ач',
      },
    },
  },

  // Подсказки
  hints: {
    noSpoilers: {
      ru: 'Без названий и спойлеров',
      chv: 'Ятсăр, спойлерсĕр',
      tt: 'Исемнәрсез һәм спойлерсыз',
    },
    clickToAdd: {
      ru: 'Нажмите на карту, чтобы добавить находку',
      chv: 'Тупăш хушма картана пус',
      tt: 'Табылган өстәр өчен картага бас',
    },
    geolocationError: {
      ru: 'Не удалось определить местоположение',
      chv: 'Вырăна палăртаймарăм',
      tt: 'Урынны билгеләп булмады',
    },
    linkCopied: {
      ru: 'Ссылка скопирована',
      chv: 'Сăлтав куçнă',
      tt: 'Сылтама күчермәләнде',
    },
    findingAdded: {
      ru: 'Находка добавлена!',
      chv: 'Тупăш хушнă!',
      tt: 'Табылган өстәлде!',
    },
  },

  // Лендинг
  landing: {
    problem: {
      title: { ru: 'Проблема', chv: 'Йывăр', tt: 'Проблема' },
      text: {
        ru: 'Туристические гиды показывают одни и те же места. Настоящий город остаётся невидимым.',
        chv: 'Турист гидĕсем пĕр вырăнсене кăтартаççĕ. Чăн хула курăнман юлать.',
        tt: 'Туристик гидлар бер үк урыннарны күрсәтә. Чын шәһәр күренмичә кала.',
      },
    },
    idea: {
      title: { ru: 'Идея', chv: 'Шухăш', tt: 'Идея' },
      text: {
        ru: 'Исследуйте город без спойлеров. Добавляйте находки, не раскрывая деталей. Коллективно снимайте туман.',
        chv: 'Хулана спойлерсĕр тĕпчĕр. Деталсăр тупăшсем хушăр. Пĕрле тăмана çурăр.',
        tt: 'Шәһәрне спойлерсыз өйрәнегез. Детальләрсез табылганнар өстәгез. Бергәләп томанны алыгыз.',
      },
    },
    whereEats: {
      title: { ru: 'Где ест город', chv: 'Хула мĕнте апатланать', tt: 'Шәһәр кайда ашый' },
      text: {
        ru: 'Отдельный слой для локальной кухни. Столовые, чайханы, места после смены — без меню и цен.',
        chv: 'Вырăн апатĕ валли уйăрăм слой. Апатлану, чĕйханăсем, ĕç хыççăн вырăнĕсем — менюсăр тата хаксăр.',
        tt: 'Җирле ашлар өчен аерым катлам. Ашханәләр, чәйхәнәләр, эштән соң урыннар — менюсыз һәм бәясез.',
      },
    },
    cta: {
      ru: 'Начать исследование',
      chv: 'Тĕпчевне пуçла',
      tt: 'Тикшеренүне башла',
    },
  },

  // Страница этики
  ethics: {
    title: { ru: 'Этика исследования', chv: 'Тĕпчев этикки', tt: 'Тикшеренү этикасы' },
    antiOvertourism: {
      title: { ru: 'Анти-овертуризм', chv: 'Анти-овертуризм', tt: 'Анти-овертуризм' },
      text: {
        ru: 'Мы не создаём новые точки притяжения. Мы помогаем видеть город как местные.',
        chv: 'Эпир çĕнĕ тарăн точкисем тунаймăпăр. Эпир вырăнлăхсем пек хулана курма пулăшатпăр.',
        tt: 'Без яңа тартыш нокталарын тудырмыйбыз. Без шәһәрне җирлеләр кебек күрергә булышабыз.',
      },
    },
    noSpoilers: {
      title: { ru: 'Без спойлеров', chv: 'Спойлерсĕр', tt: 'Спойлерсыз' },
      text: {
        ru: 'Названия, адреса, фото и меню запрещены. Только категория и ощущение.',
        chv: 'Ятсем, адрессем, сăн ăсĕсем тата менюсем чарăннă. Категори тата туйăм çеç.',
        tt: 'Исемнәр, адреслар, фотолар һәм менюлар тыелган. Категория һәм тойгы гына.',
      },
    },
    collectiveExploration: {
      title: { ru: 'Коллективное исследование', chv: 'Пĕрле тĕпчев', tt: 'Коллектив тикшеренү' },
      text: {
        ru: 'Каждая находка приоткрывает туман для всех. Город открывается вместе.',
        chv: 'Кашни тупăш пур çынна тăман уçать. Хула пĕрле уçăлать.',
        tt: 'Һәр табылган барысы өчен томанны ача. Шәһәр бергә ачыла.',
      },
    },
  },

  // Страница "Как это работает"
  howItWorks: {
    title: { ru: 'Как это работает', chv: 'Мĕнле ĕçлет', tt: 'Ничек эшли' },
    step1: {
      title: { ru: 'Выйди из туристического ядра', chv: 'Турист тĕшĕнчен тух', tt: 'Туристик үзәктән чык' },
      text: {
        ru: 'Зона исследования начинается там, где заканчиваются туристические маршруты.',
        chv: 'Тĕпчев районĕ турист çулĕсем вĕçленекен пуçланать.',
        tt: 'Тикшеренү зонасы туристик юллар бетә торган урыннан башлана.',
      },
    },
    step2: {
      title: { ru: 'Найди что-то', chv: 'Нимĕнле те туп', tt: 'Нәрсә дә бул тап' },
      text: {
        ru: 'Тихий двор, странный магазин, место где обедают местные.',
        chv: 'Шăп карти, тĕрлĕ тукăн, вырăнлăхсем апатланакан вырăн.',
        tt: 'Тыныч йорт, гаҗәп кибет, җирлеләр төшке аш ашаган урын.',
      },
    },
    step3: {
      title: { ru: 'Отметь без спойлеров', chv: 'Спойлерсĕр палăрт', tt: 'Спойлерсыз билгелә' },
      text: {
        ru: 'Выбери категорию и время. Названия запрещены.',
        chv: 'Категори тата вăхăт суйла. Ятсем чарăннă.',
        tt: 'Категория һәм вакыт сайла. Исемнәр тыелган.',
      },
    },
    step4: {
      title: { ru: 'Сними туман', chv: 'Тăмана çур', tt: 'Томанны ал' },
      text: {
        ru: 'Каждая находка открывает часть города для всех исследователей.',
        chv: 'Кашни тупăш пур тĕпчевçĕсем валли хула пайне уçать.',
        tt: 'Һәр табылган барлык тикшеренүчеләр өчен шәһәрнең бер өлешен ача.',
      },
    },
  },

  // О проекте
  about: {
    title: { ru: 'О проекте', chv: 'Проект çинчен', tt: 'Проект турында' },
    description: {
      ru: 'Это проект цифровой урбанистики, созданный для исследования города за пределами туристических зон.',
      chv: 'Ку цифра урбанистикин проекчĕ, туризм районĕнчен тухса хулана тĕпчеме тунă.',
      tt: 'Бу туристик зоналардан читтә шәһәрне өйрәнү өчен ясалган санлы урбанистика проекты.',
    },
  },

  // Попап находки
  findingPopup: {
    trust: { ru: 'Доверие', chv: 'Ышанăç', tt: 'Ышаныч' },
    timeActive: { ru: 'Время активности', chv: 'Ĕçлев вăхăчĕ', tt: 'Активлык вакыты' },
    note: { ru: 'Заметка', chv: 'Палăрту', tt: 'Язма' },
  },

  // Форма добавления
  addForm: {
    title: { ru: 'Новая находка', chv: 'Çĕнĕ тупăш', tt: 'Яңа табылган' },
    selectType: { ru: 'Выберите тип', chv: 'Тĕсне суйлăр', tt: 'Типны сайлагыз' },
    selectCategory: { ru: 'Выберите категорию', chv: 'Категорине суйлăр', tt: 'Категорияне сайлагыз' },
    selectTime: { ru: 'Время активности', chv: 'Ĕçлев вăхăчĕ', tt: 'Активлык вакыты' },
    addNote: { ru: 'Добавить заметку (необязательно)', chv: 'Палăрту хуш (кирлĕ мар)', tt: 'Язма өстә (мәҗбүри түгел)' },
    notePlaceholder: { ru: 'До 140 символов, без названий', chv: '140 символăн, ятсăр', tt: '140 символга кадәр, исемнәрсез' },
  },
} as const;

export type TranslationKey = keyof typeof translations;

export function t(key: TranslationKey, lang: Lang): string {
  const value = translations[key];
  if (typeof value === 'object' && lang in value) {
    return (value as Record<Lang, string>)[lang];
  }
  return key;
}

// Хук для использования переводов
import { useCallback } from 'react';

export function useI18n(lang: Lang) {
  const translate = useCallback(
    <K extends TranslationKey>(key: K): string => {
      return t(key, lang);
    },
    [lang]
  );

  const getNestedTranslation = useCallback(
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    (obj: any): any => {
      if (!obj) return obj;
      if (typeof obj === 'object' && lang in obj) {
        return obj[lang];
      }
      return obj;
    },
    [lang]
  );

  return { t: translate, lang, getNestedTranslation };
}
